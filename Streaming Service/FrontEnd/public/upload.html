<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notflix Upload Content</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">

    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    
    <link rel="stylesheet" href="css/upload.css">
</head>
<body>
    <!-- landing page and navigation -->
    <div class=" header-color header-background custom-bold-font jumbotronPadding no-gutters">
        <!-- navigation bar -->
        <nav class="navbar navbar-expand-md mavbar-colored offset-xs-0 sticky-top justify-content-end">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                <!-- navbar-toggler-icon  -->
                <span class="white-toggler"><i class="fas fa-bars"></i></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="collapsibleNavbar">
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link nav-color" href="./home.html">HOME</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-color" href="./mycontent.html">MY CONTENT</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-color mr-2" href="./profile.html">PROFILE</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link nav-color" href="">LOGOUT</a>
                    </li>
                </ul>


            </div>
        </nav>

        <nav class="sidebar col-xs-2 col-md-2">
            <a class=" active" href="./home.html">HOME</a>
            <a href="./mycontent.html">MY CONTENT</a>
            <br>
            <br>
            <a href="./profile.html">PROFILE</a>
            <a href="">LOGOUT</a>
            <br>
            <br>
        </nav>
        <div class="container-fluid">
            <div class="row text-center col-xs-7 col-md-7 align-middle container justify-content-center ">

                <form>
                    <h3>UPLOAD CONTENT</h3>
                    <div class="form-group">
                        <label for="content">CONTENT FILE</label>
                        <input type="file" id="content" accept="video/*">
                    </div>
                    <div class="form-group">
                        <label for="content_thumbnail">CONTENT THUMBNAIL</label>
                        <input type="file" id="content_thumbnail" accept="image/*">
                    </div>
                    <div class="form-group">
                        <label for="content_title">CONTENT TITLE</label>
                        <input type="text" id="content_title" value="" placeholder="Enter Content Title">
                    </div>
                    <div class="form-group">
                        <label for="content_desc">CONTENT DESCRIPTION</label>
                        <input type="text" id="content_desc" value="" placeholder="Enter Content Description">
                    </div>
                    <div class="form-group">
                        <label for="content_private"  style="word-wrap:break-word" class="d-block">MAKE CONTENT PRIVATE?
                        <input type="checkbox" class="d-block" id="content_private"></label>
                    </div>
                    <div class="form-group">
                        <button type="button" id="upload">UPLOAD CONTENT</button>
                    </div>
                </form>

            </div>
        </div>
        <!-- <div class="custom-bold-font name1 col-xs-12 col-lg-4 align-middle jumbotron pl-2">welcome to<br>NOFLIX<h2
          class="custom-bold-font align-middle">no flicks here</h2>
      </div> -->
        <div>&nbsp;</div>
    </div>


    <!-- source:   https://www.shutterstock.com/image-photo/tropical-green-leaf-isolated-background678147802
                   https://www.churchsupplies.com/store/palm-sunday-palm-dan-decor.shtml
                   https://www.pngkey.com/detail/u2r5w7w7o0i1a9e6_tropical-leaf-png-clipart-palm-trees-leaf-clip
                   https://www.maxpixel.net/Tropical-Exotic-Tree-Palm-Plant-Leaf-Nature-4206656 -->




    <footer>

        <div class="links d-xs-block col-xs-12">
            <a href="mailto:netflix@gmail.com"><i class="far fa-envelope"></i></a>
            <a href="https://instagram.com/netflix"><i class="fab fa-instagram"></i></a>
            <a class="copyright float-right mr-5">&#169; copyright noflix 2023&nbsp;</a>
        </div>

    </footer>

    <script>
        $(document).ready(function () {
            $('#upload').click(function () { 
                // Get form values
                var content_title = $('#content_title').val();
                var content_desc = $('#content_desc').val();
                var content_private = $('#content_private').is(':checked');
                var content = $('#content')[0].files[0];
                var content_thumbnail = $('#content_thumbnail')[0].files[0];
                
                // Create FormData object to send file data
                var formData = new FormData();
                formData.append('content_title', content_title);
                formData.append('content_desc', content_desc);
                formData.append('content_private', content_private);
                formData.append('content', content);
                formData.append('content_thumbnail', content_thumbnail);
                $.ajax({
                    headers: { 'authorization': localStorage.getItem('JWTtoken') },
                    url: "http://localhost:8083/user/content/upload",
                    type: "POST",
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function(response) {
                        if (response.success) {
                            window.alert('Content Uploaded Successfully');
                            window.location.assign("http://localhost:3002/home.html");
                        }
                    },
                    error: function(xhr, textStatus, err) {
                        var errorMessage = xhr.responseJSON.message;
                        window.alert(errorMessage);
                    }
                });
                return false;
            });
        });
    </script>
    <script src="./js/upload.js"></script>
</body>


    
</html>